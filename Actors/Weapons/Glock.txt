ACTOR AutoloaderSpawn : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "GLPSA0"
	Inventory.PickupMessage "Got the 9mm Autoloader."
	Inventory.PickupSound "items/gunspickup"
	+DROPPED
	States
	{
	Spawn:
		GLPP A 10
		GLPP A 1 bright
		loop
	Pickup:
	    TNT1 A 0 A_JumpIfInventory("Glock3", 1, 4) //Skips giving you the normal glock if you have the upgrade
		TNT1 A 0 A_JumpIfInventory("Glock2", 1, 3) //Skips giving you the normal glock if you have the upgrade
		TNT1 A 0 A_GiveInventory("Glock")
		TNT1 A 0 A_Jump(256, 2)
		TNT1 A 0 A_GiveInventory("NineMilAmmo", 6)
		TNT1 A 0
		Stop
	}
}
ACTOR GlockBuild2 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "GLPPA0"
	+DROPPED
	States
	{
	Spawn:
		GLPP A 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("Glock2")
		TNT1 A 0 A_takeInventory("Glock")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 0
		Stop
	}
}
ACTOR GlockBuild3 : CustomInventory
{
	Inventory.Amount 0
	scale 0.7
	Inventory.Icon "GLPPA0"
	+DROPPED
	States
	{
	Spawn:
		GLPP A 10
		loop
	Pickup:
		TNT1 A 0 A_GiveInventory("Glock3")
		TNT1 A 0 A_takeInventory("Glock2")
		TNT1 A 0 A_takeInventory("Glock")
		TNT1 A 0 A_PlaySound("special/workbench",CHAN_ITEM)
		TNT1 A 0
		Stop
	}
}
Actor LaserDot : FastProjectile
{
radius 2
height 2
+FORCEXYBILLBOARD
+NOGRAVITY
+NOBLOCKMAP
+BLOODLESSIMPACT
+SKYEXPLODE
+DONTSPLASH
+NOTRIGGER
+NOTONAUTOMAP
-ALLOWPARTICLES
+NOTIMEFREEZE
speed 150
damage 0
scale .25
missileheight 8
states
	{
	Spawn:
		TNT1 A 5
		stop
	Death:
		TNT1 A 1 Bright A_SpawnItem("Laserdotpuff",0,5)
		stop
	}
}
Actor Laserdotpuff : BulletPuff
{
    +FORCEXYBILLBOARD
    +NOGRAVITY
    +NOBLOCKMAP
	+ALWAYSPUFF
	+PUFFGETSOWNER
	+BLOODLESSIMPACT
	+PUFFONACTORS
	+SKYEXPLODE
	+DONTSPLASH
	+NOTRIGGER
   	+NOTONAUTOMAP
	-ALLOWPARTICLES
	+NOTIMEFREEZE
	VSpeed 0
	Renderstyle Add
	Scale 0.2
	States
	{
		Spawn:
		Crash:
		Death:
		XDeath:
			LDOT A 2 Bright
			Stop
	}
}
ACTOR Glockloaded : Ammo
{
 Inventory.MaxAmount 16
 Ammo.BackPackMaxAmount 16
 +IGNORESKILL
}
actor Glock: Weapon
{
 Weapon.SelectionOrder 2000
 Weapon.AmmoUse1 1
 Weapon.AmmoUse2 1
 Weapon.AmmoGive2 6
 Weapon.AmmoType2 "NineMilammo"
 Weapon.AmmoType1 "GlockLoaded"
 weapon.slotnumber 2
 Inventory.Pickupmessage "Got the 9mm Autoloader."
 Inventory.PickupSound "items/gunspickup"
 Obituary "%o ran into %k's gat."
   Weapon.BobStyle Alpha
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .2
	Weapon.BobRangeY .5
 weapon.upsound "weapons/revolverup"
 Tag "9mm Autoloader"
  Inventory.Icon "GLPSA0"
 +AMMO_CHECKBOTH
 +NOALERT
 +NOAUTOFIRE
 +DROPPED
 scale 0.7
 States
 {
 Ready:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"LoadedReady")
  GLKE D 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  Loop
 LoadedReady:
  GLOK A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  Loop
 ReadyLamp:
     GLKL G 0 a_JumpIfInventory("Glockloaded",1,"readylamploaded")
     GLKL G 0 a_JumpIfInventory("batteries",1,2)
	 GLKL G 0 a_jump(256,"Unlight")
	 GLKL G 0 A_light(5)
	 GLKL G 0 A_jump(240,2)
     GLKL G 0 A_takeinventory("batteries",1)
     GLKL W 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     GLKL X 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     GLKL Y 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 GLKL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     loop
 ReadyLampLoaded:
     GLKL G 0 a_JumpIfInventory("batteries",1,2)
	 GLKL G 0 a_jump(256,"Unlight")
	 GLKL G 0 A_light(5)
	 GLKL G 0 A_jump(240,2)
     GLKL G 0 A_takeinventory("batteries",1)
     GLKL G 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     GLKL H 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     GLKL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     GLKL I 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 GLKL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     loop
 Deselect:
  "----" A 0 A_LIGHT0
  "----" A 0 A_takeinventory("Lightlit",1)
  "----" A 0 A_lower
  "----" A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"Loadedselect")
  GLKE D 1 A_Raise
  GLKE D 0 A_Raise
  Loop
 LoadedSelect:
  GLOK A 1 A_Raise
  GLOK A 0 A_Raise
  Loop
 Fire:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireReal")
  Goto Reload
 Firelamp:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  GLOK A 0 A_gunflash
  GLOK A 0 A_PlayWeaponSound("weapons/glock")
  GLKF A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  GLKF B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  GLOK B 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  GLOK C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  GLKE D 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  GLKE D 1 a_refire("empty")
  goto ready
  GLOK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0 a_refire("fire")
  goto ready
   FirelampReal:
  GLKL A 0 A_gunflash("lampFlash")
  GLKL A 0 A_PlayWeaponSound("weapons/glock")
  GLKL J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  GLKL K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKL A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  GLKL K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  GLKL L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKL M 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  GLKL N 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  GLKL N 1 a_refire("emptylamp")
  goto readylamp
  GLKL G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLOK A 0 a_refire("firelamp")
  goto readylamp
 empty:
  GLKE D 1  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKE D 0  a_refire("empty")
  goto ready
  emptylamp:
  GLKL M 2  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKL M 0 bright A_spawnitemex("lanternglow",0,0,8,0)
  GLOK A 0  a_refire("fire")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadchamber")
		GLKE D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadlamp2")
        GLKL S 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKL S 0 bright A_spawnitemex("lanternglow",0,0,8,0)
		GLKL S 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        GLKL G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKL G 0 bright A_spawnitemex("lanternglow",0,0,8,0)
		GLKL G 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
 ReloadChamber:
		GLOK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        GLKL S 1 a_playsound("weapons/lampclickoff")
	    GLKL T 2 a_light0
	    GLKL U 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    GLKL V 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		GLKE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		GLKE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
 droplamp2:
        GLKL o 1 a_playsound("weapons/lampclickoff")
	    GLKL P 2 a_light0
	    GLKL Q 5 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    GLKL R 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		GLOK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		GLOK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	Work1:
	    GLKE DE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		GLKE FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		GLKE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		GLKE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLKE OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
	Work2:
	    GLOK E 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		GLOK FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		GLOK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		GLOK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		GLOK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",15,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",16,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone
	ReloadDone:
		GLOK QQQRST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 3 
		GLOK GFE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
	Zoom:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	GLKL A 2 
	GLKL BCD 2 
	GLKL E 2 a_playsound("weapons/revolverup")
	GLKL F 2 A_giveinventory("lightlit",1) 
	GLKL G 1 a_playsound("weapons/lampclickon")
    goto readylamp
	unlight:
	GLKL G 1 a_playsound("weapons/lampclickoff")
	GLKL FE 2 a_light0
	GLKL E 2 a_playsound("weapons/revolverup")
	GLKL DCB 1 
	GLKL A 1 A_takeinventory("lightlit",1)
    goto loadedready
  USer1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"AltUser1")
        GLOK DEFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		GLOK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  AltUser1:
	GLKL O 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	GLKL PQ 2 a_light0
	GLKL R 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		GLOK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready     
   FLASH:
        TNT1 A 2
		goto lightdone
  lampFlash:
        TNT1 A 0
		TNT1 AAAAAAAAA 1 A_spawnitemex("lanternglow",0,0,8,0)
		stop
 Spawn:
       GLPP A 10
       GLPP A 1 bright
		loop
 }
}
actor Glock2: Glock
{
 Inventory.Pickupmessage "Got the Tacticool Autoloader."
 Obituary "%o ran into %k's laser-pointer."
 Tag "Tacticool Autoloader"
 Inventory.Icon "GLP2A0"
 scale 0.7
 +CHEATNOTWEAPON
 States
 {
 Ready:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"LoadedReady")
  G2KE D 0 A_gunFLASH
  G2KE D 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 LoadedReady:
  G2OK A 0 A_gunFLASH
  G2OK A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 ReadyLamp:
     G2KL G 0 a_JumpIfInventory("Glockloaded",1,"readylamploaded")
     G2KL G 0 a_JumpIfInventory("batteries",1,2)
	 G2KL G 0 a_jump(256,"Unlight")
	 G2KL G 0 A_light(5)
	 G2KL G 0 A_jump(240,2)
     G2KL G 0 A_takeinventory("batteries",1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL W 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     G2KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL X 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     G2KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL Y 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
	 G2KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     loop
 ReadyLampLoaded:
     G2KL G 0 a_JumpIfInventory("batteries",1,2)
	 G2KL G 0 a_jump(256,"Unlight")
	 G2KL G 0 A_light(5)
	 G2KL G 0 A_jump(240,2)
     G2KL G 0 A_takeinventory("batteries",1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL G 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     G2KL H 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G2KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     G2KL I 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
	 G2KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     loop
 Deselect:
  "----" A 0 A_LIGHT0
  "----" A 0 A_takeinventory("Lightlit",1)
  "----" A 0 A_lower
  "----" A 1 A_Lower
  Loop
 LoadedDeselect:
  G2OK A 0 A_lower
  G2OK A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_TakeInventory("Glock",1)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"Loadedselect")
  G2KE D 1 A_Raise
  G2KE D 0 A_Raise
  Loop
 LoadedSelect:
  G2OK A 1 A_Raise
  G2OK A 0 A_Raise
  Loop
 Fire:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireReal")
  Goto Reload
 Firelamp:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  G2OK A 0 A_gunFLASH
  G2OK A 0 A_PlayWeaponSound("weapons/glock")
  G2KF A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,-1,8,"hitpuff")
  G2KF B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  G2OK B 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G2OK C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,4)
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G2KE D 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G2KE D 1 a_refire("empty")
  goto ready
  G2OK A 0 A_GUNFLASH
  G2OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2OK A 0 a_refire("fire")
  goto ready
  FirelampReal:
  G2KL A 0 A_gunflash("lampFlash")
  G2KL A 0 A_PlayWeaponSound("weapons/glock")
  G2KL J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  G2KL K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KL A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  G2KL K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G2KL L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KL M 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  G2KL N 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G2KL N 1 a_refire("emptylamp")
  goto readylamp
  G2KL G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2KL A 0 a_refire("firelamp")
  goto readylamp
 empty:
  G2KE D 1  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G2OK A 0 A_gunFLASH
  G2KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G2KE D 0  a_refire("empty")
  goto ready
 emptylamp:
  GLKL M 2  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  GLKL M 0 bright A_spawnitemex("lanternglow",0,0,8,0)
  GLOK A 0  a_refire("fire")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadchamber")
		G2KE D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadlamp2")
        G2KL S 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL S 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		G2KL S 0 bright A_spawnitemex("lanternglow",0,0,8,0)
		GLKL S 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        G2KL G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		G2KL G 0 bright A_spawnitemex("lanternglow",0,0,8,0)
		GLKL G 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
 ReloadChamber:
		G2OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        G2KL S 1 a_playsound("weapons/lampclickoff")
	    G2KL T 2 a_light0
	    G2KL U 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G2KL V 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G2KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G2KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
 droplamp2:
        G2KL o 1 a_playsound("weapons/lampclickoff")
	    G2KL P 2 a_light0
	    G2KL Q 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G2KL R 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G2OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G2OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	Work1:
	    G2KE E 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G2KE FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G2KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G2KE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
	Work2:
	    G2OK E 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G2OK FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G2OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G2OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G2OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",15,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",16,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone
	ReloadDone:
		G2OK QRST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 3 
		G2OK GFE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
Zoom:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	G2KL A 2 
	G2KL BCD 2 
	G2KL E 2 a_playsound("weapons/revolverup")
	G2KL F 2 A_giveinventory("lightlit",1) 
	G2KL G 1 a_playsound("weapons/lampclickon")
    goto readylamp
	unlight:
	G2KL G 1 a_playsound("weapons/lampclickoff")
	G2KL FE 2 a_light0
	G2KL E 2 a_playsound("weapons/revolverup")
	G2KL DCB 1 
	G2KL A 1 A_takeinventory("lightlit",1)
    goto loadedready
  User1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"Altuser1")
        G2OK DEFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G2OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  AltUser1:
        GLKL O 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	    GLKL PQ 2 a_light0
	    GLKL R 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		 KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G2OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  FLASH:
    G2OL A 1 bright a_jump(128,1)
	goto lightdone
	G2OL B 1 bright a_jump(128,1)
	goto lightdone
	G2OL C 1 bright
	goto lightdone
  lampFlash:
        TNT1 A 0
		TNT1 AAAAAAAAA 1 A_spawnitemex("lanternglow",0,0,8,0)
		stop
 Spawn:
        GL2P A 10
		GL2P A 1 bright
		loop
 }
}
actor Glock3: Glock
{
 Inventory.Pickupmessage "Got the Tacticool Burstfire Autoloader."
 Obituary "%o ran into %k's laser-pointer."
 Tag "Tacticool Burstfire Autoloader"
 Inventory.Icon "GLP2A0"
 scale 0.7
 +CHEATNOTWEAPON
 States
 {
 Ready:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"Readylamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"LoadedReady")
  G3KE D 0 A_gunFLASH
  G3KE D 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 LoadedReady:
  G3OK A 0 A_gunFLASH
  G3OK A 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  Loop
 ReadyLamp:
     G3KL G 0 a_JumpIfInventory("Glockloaded",1,"readylamploaded")
     G3KL G 0 a_JumpIfInventory("batteries",1,2)
	 G3KL G 0 a_jump(256,"Unlight")
	 G3KL G 0 A_light(5)
	 G3KL G 0 A_jump(240,2)
     G3KL G 0 A_takeinventory("batteries",1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL W 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     G3KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL X 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
     G3KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL Y 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
	 G3KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     loop
 ReadyLampLoaded:
     G3KL G 0 a_JumpIfInventory("batteries",1,2)
	 G3KL G 0 a_jump(256,"Unlight")
	 G3KL G 0 A_light(5)
	 G3KL G 0 A_jump(240,2)
     G3KL G 0 A_takeinventory("batteries",1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL G 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     G3KL H 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
     G3KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     G3KL I 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWZOOM|WRF_ALLOWUSER1)
	 G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
	 G3KL G 0 A_spawnitemex("lanternglow",0,0,8,0)
     loop
 Deselect:
  "----" A 0 A_LIGHT0
  "----" A 0 A_takeinventory("Lightlit",1)
  "----" A 0 A_lower
  "----" A 1 A_Lower
  Loop
 LoadedDeselect:
  G3OK A 0 A_lower
  G3OK A 1 A_Lower
  Loop
 Select:
  TNT1 A 0 A_TakeInventory("Glock",1)
  TNT1 A 0 A_TakeInventory("Glock2",1)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"Loadedselect")
  G3KE D 1 A_Raise
  G3KE D 0 A_Raise
  Loop
 LoadedSelect:
  G3OK A 1 A_Raise
  G3OK A 0 A_Raise
  Loop
 Fire:
  TNT1 A 0 a_JumpIfInventory("lightlit",1,"FireLamp")
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireReal")
  Goto Reload
 Firelamp:
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,"FireLampReal")
  Goto Reload
 FireReal:
  G3OK A 0 A_gunFLASH
  G3OK A 0 A_PlayWeaponSound("weapons/glock")
  G3KF A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  TNT1 A 0 A_Light2
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(1,1,-1,8,"hitpuff")
  G3KF B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  TNT1 A 0 A_Light0
  G3OK B 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G3OK C 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,4)
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G3KE D 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G3KE D 1 a_refire("empty")
  goto ready
  G3OK A 0 A_GUNFLASH
  G3OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0 a_refire("fire")
  goto ready
  FirelampReal:
  G3KL A 0 A_gunflash("lampFlash")
  G3KL A 0 A_PlayWeaponSound("weapons/glock")
  G3KL J 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
  TNT1 A 0 A_FireBullets(2.5,2.5,-1,8,"hitpuff")
  G3KL K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
  G3KL K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 A_AlertMonsters
  G3KL L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL M 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  TNT1 A 0 a_JumpIfInventory("GlockLoaded",1,3)
  G3KL N 1  A_PlaySound("weapons/dryfire", CHAN_ITEM)
  G3KL N 1 a_refire("emptylamp")
  goto readylamp
  G3KL G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL A 0 a_refire("firelamp")
  goto readylamp
 empty:
  G3KE D 1  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3OK A 0 A_gunFLASH
  G3KE A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
  G3KE D 0  a_refire("empty")
  goto ready
 emptylamp:
  G3KL M 2  A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  G3KL M 0 bright A_spawnitemex("lanternglow",0,0,8,0)
  G3OK A 0  a_refire("fire")
  goto readylamp
 Reload:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"ReloadLamp")
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadchamber")
		G3KE D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL W 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work1")
        Goto Ready
  ReloadLamp:
        TNT1 A 0 A_jumpifinventory("glockloaded",1,"reloadlamp2")
        G3KL S 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL S 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KL S 0 bright A_spawnitemex("lanternglow",0,0,8,0)
		G3KL S 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
  ReloadLamp2:
        G3KL G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KL G 0 bright A_spawnitemex("lanternglow",0,0,8,0)
		G3KL G 0 A_JumpIfInventory("GlockLoaded",16,"Readylamp")
		TNT1 A 0 A_jumpifinventory("glockloaded",1,"lampchamber")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp")
        Goto Readylamp
 ReloadChamber:
		G3OK A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KL G 0 A_FireCustomMissile("LaserDot",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"Work2")
        Goto Ready
 lampChamber:
		TNT1 A 0 A_JumpIfInventory("GlockLoaded",16,"Ready")
        TNT1 A 0 A_JumpIfInventory("NineMilammo",1,"droplamp2")
        Goto Readylamp
 droplamp:
        G3KL S 1 a_playsound("weapons/lampclickoff")
	    G3KL T 2 a_light0
	    G3KL U 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G3KL V 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G3KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G3KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE OOPPPP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
 droplamp2:
        G3KL o 1 a_playsound("weapons/lampclickoff")
	    G3KL P 2 a_light0
	    G3KL Q 2 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
	    G3KL R 1 A_takeinventory("lightlit",1)
		TNT1 A 1
		G3OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G3OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	Work1:
	    G3KE E 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G3KE FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G3KE HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3KE LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipslide", CHAN_ITEM)
		G3KE OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop
	Work2:
	    G3OK E 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipout", CHAN_ITEM)
		G3OK FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 1
		G3OK HIJ 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK K 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		G3OK LMN 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 0 A_PlaySound("weapons/pistolclipin", CHAN_ITEM)
		G3OK OOP 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		goto reloadloop2
	ReloadLoop:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",15,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop")
        Goto ReloadDone
	ReloadLoop2:
		TNT1 A 0 a_JumpIfInventory("Glockloaded",16,"ReloadDone")
		TNT1 A 0 A_TakeInventory("NineMilAmmo",1)
		TNT1 A 0 A_Giveinventory("Glockloaded",1)
		TNT1 A 0 a_JumpIfInventory("NineMilAmmo",1,"Reloadloop2")
        Goto ReloadDone
	ReloadDone:
		G3OK QQQRST 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		TNT1 A 3 
		G3OK GFE 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_ALLOWUSER1)
		Goto Ready
Zoom:
	TNT1 A 0 a_JumpIfInventory("lightlit",1,"unlight")
	G3KL A 2 
	G3KL BCD 2 
	G3KL E 2 a_playsound("weapons/revolverup")
	G3KL F 2 A_giveinventory("lightlit",1) 
	G3KL G 1 a_playsound("weapons/lampclickon")
    goto readylamp
	unlight:
	G3KL G 1 a_playsound("weapons/lampclickoff")
	G3KL FE 2 a_light0
	G3KL E 2 a_playsound("weapons/revolverup")
	G3KL DCB 1 
	G3KL A 1 A_takeinventory("lightlit",1)
    goto loadedready
  User1:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"AltUser1")
        G3OK DEFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  AltUser1:
        G3KL O 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	    G3KL PQ 2 a_light0
	    G3KL R 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		 KNIF ABCD 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
  	    TNT1 A 0 A_CustomPunch(random(5, 10) * 5, TRUE, 0, "knifePuff", 80)
	    KNIF EFG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 10 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3OK GFED 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		goto ready
  Altfire:
        TNT1 A 0 a_JumpIfInventory("lightlit",1,"Altlit")
        TNT1 A 0 a_JumpIfInventory("Glockloaded",3,"FireTriple")
        TNT1 A 0 a_JumpIfInventory("Glockloaded",2,"FireDouble")
	    TNT1 A 0 a_JumpIfInventory("Glockloaded",1,"FireSingle")
        Goto Reload
   Altlit:
        TNT1 A 0 a_JumpIfInventory("Glockloaded",3,"TripleLit")
        TNT1 A 0 a_JumpIfInventory("Glockloaded",2,"DoubleLit")
	    TNT1 A 0 a_JumpIfInventory("Glockloaded",1,"SingleLit")
        Goto Reload
  FireTriple:
        G3KB A 0 A_gunFLASH
        G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB A 0 A_PlayWeaponSound("weapons/glock")
		G3KB C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB E 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB E 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-1)
		TNT1 A 0 A_AlertMonsters
		G3KB F 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB GHIJJKL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KB L 1 A_refire("altfire")
		goto ready
   FireDouble:
        G3KB A 0 A_gunFLASH
        G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KB C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KB KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KB L 1 A_refire("altfire")
		goto ready
    FireSingle:
        G3KB A 0 A_gunFLASH
        G3KB A 0 A_PlayWeaponSound("weapons/glock")
        G3KB A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KB A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 16, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KB B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3OK A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KB KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KB L 1 A_refire("altfire")
		goto ready
TripleLit:
        G3KL A 0 A_gunflash("lampFlash")
        G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC A 0 A_PlayWeaponSound("weapons/glock")
		G3KC C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC E 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC E 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 20, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-1)
		TNT1 A 0 A_AlertMonsters
		G3KC F 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC GHIJJKL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KC L 1 A_refire("altfire")
		goto ready
   DoubleLit:
        G3KL A 0 A_gunflash("lampFlash")
        G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		G3KC C 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC C 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (2, 2, 1, 18, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC D 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KC KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KC L 1 A_refire("altfire")
		goto ready
    SingleLit:
        G3KL A 0 A_gunflash("lampFlash")
        G3KC A 0 A_PlayWeaponSound("weapons/glock")
        G3KC A 1 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("LaserDot",0,0,0,0)
        TNT1 A 0 A_Light1
        TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,8,0)
		TNT1 A 0 A_FireBullets (1, 1, -1, 16, "hitpuff",FBF_NORANDOM)
		TNT1 A 0 A_TakeInventory("GlockLoaded",1)
		TNT1 A 0 A_SetPitch(Pitch-0.5)
		G3KC B 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        G3KC A 0 A_FireCustomMissile("pistolCasingSpawner",-10,0,15,0)
        TNT1 A 0 A_Light0
		TNT1 A 0 A_AlertMonsters
		G3KC KL 1 A_FireCustomMissile("LaserDot",0,0,0,0)
		G3KC L 1 A_refire("altfire")
		goto ready
  FLASH:
    G3OL A 1 bright a_jump(128,1)
	goto lightdone
	G3OL B 1 bright a_jump(128,1)
	goto lightdone
	G3OL C 1 bright
	goto lightdone
  lampFlash:
        TNT1 A 0
		TNT1 AAAAAAAAA 1 A_spawnitemex("lanternglow",0,0,8,0)
		stop
 Spawn:
        GL3P A 10
		GL3P A 1 bright
		loop
 }
}